<script>
    const MOVES = {ROCK: "rock", PAPER: "paper", SCISSORS: "scissors"};

    let userScore = 0;
    let computerScore = 0;

    function getComputerMove(){
        let rand = Math.floor(Math.random() * Object.keys(MOVES).length);
        return MOVES[Object.keys(MOVES)[rand]];
    }

    function getUserMove(){
        let move = prompt(`Enter ${MOVES.ROCK}, ${MOVES.PAPER}, or ${MOVES.SCISSORS}`);

        move = move.trim().toLowerCase();

        if(Object.values(MOVES).includes(move))
            return move;
        
        userMove();
    }

    function playRound(userMove, computerMove){
        const TIE_MESSAGE = `Tie, ${userMove} equals ${computerMove}.`;
        const WIN_MESSAGE = `You win, ${userMove} beats ${computerMove}.`;
        const LOSE_MESSAGE = `You lose, ${computerMove} beats ${userMove}.`;

        if(userMove == computerMove){
            console.log(TIE_MESSAGE);
            return;
        }

        switch(userMove){
            case MOVES.ROCK:
            if (computerMove == MOVES.SCISSORS){
                console.log(WIN_MESSAGE);
                ++userScore;
            } else {
                console.log(LOSE_MESSAGE);
                ++computerScore;
            }
            break;
            case MOVES.PAPER:
            if (computerMove == MOVES.ROCK){
                console.log(WIN_MESSAGE);
                ++userScore;
            } else {
                console.log(LOSE_MESSAGE);
                ++computerScore;
            }
            break;
            case MOVES.SCISSORS:
            if (computerMove == MOVES.PAPER){
                console.log(WIN_MESSAGE);
                ++userScore;
            } else {
                console.log(LOSE_MESSAGE);
                ++computerScore;
            }
            break;
            default:
            break;
        }
        
    }

    function reset(){
        userScore = 0;
        computerScore = 0;
    }

    function runGame(){
        reset();

        const ROUNDS = 5;

        for(let round = 0; round < ROUNDS; ++round){
            console.log(`Round ${round + 1}:`);
            playRound(getUserMove(), getComputerMove());
        }

        const SCORES = `userScore: ${userScore} computerScore: ${computerScore}`;

        console.log("Final score:");
        if(userScore == computerScore)
            console.log("Tie game! " + SCORES);
        else if(userScore > computerScore)
            console.log("You won! " + SCORES);
        else
            console.log("You lost! " + SCORES);
    }

    runGame();

</script>